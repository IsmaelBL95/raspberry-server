# Usar HTTP/1.1 para que WebSockets funcionen correctamente
proxy_http_version 1.1;

# Cabeceras que se reenvían al backend (muy estándar)
proxy_set_header Host               $host;
proxy_set_header X-Real-IP          $remote_addr;
proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto  $scheme;

# Timeouts (equilibrados)
proxy_connect_timeout 5s;   # Tiempo para conectar con el backend
proxy_send_timeout    30s;  # Tiempo para enviar datos al backend
proxy_read_timeout    60s;  # Tiempo para esperar respuesta del backend

# Soporte para WebSockets (futuro chat)
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "upgrade";